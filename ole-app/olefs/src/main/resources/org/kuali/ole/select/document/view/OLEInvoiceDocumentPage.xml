<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:p="http://www.springframework.org/schema/p"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans         http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">

    <bean id="OLEInvoiceView-ProcessItem-PurchaseOrder"   parent="Uif-Disclosure-HorizontalBoxSection" p:style="width: auto">
        <property name="items">
            <list>
                <bean id="OleInvoice_POLookup" parent="Uif-InputField" p:propertyName="poId" p:label="Purchase Order  " >
                    <property name="quickfinder">
                        <bean parent="Uif-QuickFinder" p:dataObjectClassName="org.kuali.ole.select.document.OLEInvoicePurchaseOrderSearch"
                              p:fieldConversions="vendorNumber:vendorNumber,purapDocumentIdentifier:poId" p:lookupParameters="vendorHeaderGeneratedIdentifier:vendorHeaderGeneratedIdentifier,vendorDetailAssignedIdentifier:vendorDetailAssignedIdentifier,vendorName:vendorName"/>
                    </property>
                    <property name="control">
                        <bean parent="Uif-TextControl" p:size="10" p:maxLength="10"/>
                    </property>
                </bean>
                <bean id="addProcessItem-button" parent="Uif-SecondaryActionButton-Small" p:methodToCall="addProcessItem"
                	p:actionLabel="add"  p:hidden="true" p:refreshId="OleInvoiceView-POItems" />
                	<!--  p:ajaxSubmit="true"
                	p:successCallback="toggleCollapseAllSections()"/ -->
            </list>
        </property>
    </bean>

    <bean id="OleInvoiceView-POItems" parent="Uif-Disclosure-GridSection" p:layoutManager.numberOfColumns="1" p:layoutManager.applyDefaultCellWidths="false"  p:style="width:auto">
        <property name="headerText" value="Process Titles"/>
        <property name="items">
            <list>
                <bean  id="OLEInvoiceView-processItems-purchaseOrderDocuments"  parent="Uif-TableCollectionSection"  p:layoutManager.numberOfColumns="10"
                       p:layoutManager.applyDefaultCellWidths="false" p:style="width:auto">
                    <property name="headerText" value="Purchase Order Documents" />
                    <property name="collectionObjectClass" value="org.kuali.ole.select.document.OlePurchaseOrderDocument" />
                    <property name="propertyName" value="purchaseOrderDocuments" />
                    <property name="layoutManager.renderSequenceField" value="false" />
                    <property name="layoutManager.richTable.templateOptions" value="false"/>
                    <property name="layoutManager.richTable.render" value="false"/>
                    <property name="renderAddLine" value="false"/>
                    <property name="renderLineActions" value="false"/>
                    <property name="layoutManager.actionColumnPlacement" value="LEFT" />
                    <!--<property name="collectionLookup.render" value="true"/>-->
                    <!--<property name="layoutManager.actionColumnPlacement" value="LEFT" />-->
                    <!--<property name="layoutManager.columnCalculations">
                        <list>
                            <bean parent="Uif-ColumnCalculationInfo-Sum" p:propertyName="field1"/>
                        </list>
                    </property>-->
                    <property name="items">
                        <list>

                            <bean id="process_item_po_doc" parent="Uif-LinkField" p:label="PO #"  p:style="word-break: break-all;word-wrap: break-word"
                                  p:linkText="@{#line.purapDocumentIdentifier}" p:target="_blank" p:href="@{#line.poItemLink}"/>

                            <!-- <bean id="invoice-poEndDate" parent="Uif-InputField" p:propertyName="poEndDate" p:label="P.O. End Date " p:width="8%">
                                 <property name="control">
                                     <bean parent="Uif-DateControl" p:size="10" />
                                 </property>
                             </bean>-->

                            <bean id="CurrentItem_closePO" parent="Uif-InputField"
                                  p:propertyName="closePO" p:label="Close P.O" p:width="6%">
                                <property name="control">
                                    <bean parent="Uif-CheckboxControl"/>
                                </property>
                            </bean>

                            <!--<bean id="CurrentItem_poNotes" parent="Uif-InputField" p:label="PO Notes" p:propertyName="poNotes" p:readOnly="true"  p:width="18%"/>-->

                            <bean id="CurrentItem_deletePO" parent="Uif-HorizontalFieldGroup" p:width="10%" p:label="Action">
                                <property name="items">
                                    <list>
                                        <bean id="addPOItems_button_test" parent="Uif-SecondaryActionButton-Small" p:methodToCall="addPoItems" p:actionLabel="Add P.O" p:title="Add selected PO Items" 
											p:refreshId="OLEInvoiceView-processItems-Wrapper" />
                                        <bean id="CurrentItem_deletePurchaseOrder" parent="Uif-SecondaryActionButton-Small" p:actionLabel="Delete P.O" p:methodToCall="deletePO"/>
                                    </list>
                                </property>
                            </bean>

                            <ref bean="OLEInvoiceView-poDoc-relatedView"/>
                            <!--<bean parent="OLEInvoice-ProcessTitle-PurchaseOrder"/>-->
                            <!--<bean parent="OLEInvoice-ProcessTitle-PurchaserOrderLineItemForInvoice"/>
                            <bean parent="OLEInvoice-ProcessTitle-PaymentHistory"/>
                            <bean parent="OLEInvoice-ProcessTitle-ViewRelatedDocument"/>-->
                            
                        </list>
                    </property>
                    <property name="layoutManager.rowDetailsGroup" >
                        <bean parent="Uif-HorizontalBoxGroup" >
                            <!-- p:label="Purchase Order Line Item Total">-->
                            <property name="items">
                                <list>
                                    <bean id="InvoiceLineItems_poNumber" parent="Uif-DataField" p:label="PO #"  p:propertyName="purapDocumentIdentifier"/>
                                    <bean id="InvoiceLineItems_encumFreight" parent="Uif-DataField" p:label="Encumbrance Excluding freight and S/H" p:propertyName="encumbranceTotalAmount"/>
                                    <bean id="InvoiceLineItems_encumTot" parent="Uif-DataField" p:label="Total Encumbrance Amount"  p:propertyName="encumbranceAmount"/>
                                    <bean id="InvoiceLineItems_paidAmt" parent="Uif-DataField" p:label="Total Paid Amount"  p:propertyName="paidAmount"/>
                                </list>
                            </property>
                        </bean>
                    </property>
                    <property name="subCollections">
                        <list>
                            <ref bean="OLEInvoiceView-processItems-currentItems"/>
	                        <!--
	                        <ref bean="OLEInvoiceView-InvoiceLineItems-POLineForInvoice"/>
	                        -->
                        </list>
                    </property>
                    <!-- <property name="lineActions">
                         <list>
                             <bean id="addPOItems_button" parent="Uif-PrimaryActionButton-Small" p:methodToCall="addPoItems" p:actionLabel="Add" p:title="Add selected PO Items" p:refreshId="OLEInvoiceView-processItems" />
                         </list>
                     </property>-->
                </bean>

            </list>
        </property>
    </bean>

    <bean id="OLEInvoiceView-poDoc-relatedView" parent="Uif-HorizontalFieldGroup"  p:label="View Related Documents" p:style="width:auto" p:render="@{#line.relatedViews ne null}">
        <property name="items">
            <list>
                <ref bean="OLEInvoiceView-PurchaseOrder-RequisitionView-Wrapper"/>
                <ref bean="OLEInvoiceView-PurchaseOrder-LineItemReceivingView-Wrapper"/>
                <ref bean="OLEInvoiceView-PurchaseOrder-CorrectionView-Wrapper"/>
                <ref bean="OLEInvoiceView-PurchaseOrder-PaymentRequestView-Wrapper"/>
                <ref bean="OLEInvoiceView-PurchaseOrder-CreditMemoView"/>
            </list>
        </property>
    </bean>

    <bean id="OLEInvoiceView-processItems-poDetails" parent="Uif-VerticalBoxGroup">
        <property name="items">
            <list>
                <ref bean="OLEInvoiceView-processItems-accountingLines" />
                <ref bean="OLEInvoiceView-processItems-invoiceNotes"/>
                <ref bean="OLEInvoiceView-donors"/>
            </list>
        </property>
    </bean>

	<bean id="OLEInvoiceView-processItems-SubCollection" parent="Uif-CollectionGroupBase" abstract="true">
		<property name="cssClasses">
			<list>
				<value>uif-disclosure</value>
				<value>uif-tableSubCollection</value>
			</list>
		</property>
		<property name="header">
			<bean parent="Uif-SubCollectionHeader">
				<property name="lowerGroup">
					<bean parent="Uif-InactiveItemsActionsGroup" />
				</property>
			</bean>
		</property>
		<property name="lineActions">
			<list>
				<bean parent="Uif-DeleteLineAction" />
			</list>
		</property>
		<property name="disclosure.render" value="true" />
	</bean>

	<bean id="OLEInvoiceView-processItems-currentItems" parent="OLEInvoiceView-processItems-SubCollection" 
		p:fieldBindingObjectPath="purchaseOrderDocuments" p:renderLineActions="false" p:RenderInactiveToggleButton="false"
 		p:renderAddLine="false">
		<property name="propertyName" value="items" />
		<property name="header.headerText" value="Current Items" />
		<property name="collectionObjectClass"
			value="org.kuali.ole.select.businessobject.OlePurchaseOrderItem" />
		<property name="layoutManager">
			<bean
				class="org.kuali.ole.select.document.krad.OleInvoicePOCurrentItemsLayout"
				p:template="/WEB-INF/ftl/ole-invoice-po.ftl" p:templateName="ole_current_items">
		        <property name="rowDetailsGroup">
					<bean parent="Uif-VerticalBoxGroup">
						<property name="items">
							<list>
								<bean parent="Uif-HorizontalBoxGroup">
									<property name="items">
										<list>
				
											<bean id="CurrentItem_RouteToRequestor" parent="Uif-InputField"
												p:propertyName="itemRouteToRequestorIndicator" p:label="Route To Requestor"
												p:render="@{document.foreignCurrencyFlag}">
												<property name="control">
													<bean parent="Uif-CheckboxControl" />
												</property>
											</bean>
				
											<bean id="CurrentItem_PublicView" parent="Uif-InputField"
												p:propertyName="itemPublicViewIndicator" p:label="Public View"
												p:render="@{document.foreignCurrencyFlag}">
												<property name="control">
													<bean parent="Uif-CheckboxControl" />
												</property>
											</bean>
										</list>
									</property>
								</bean>
								<ref bean="OLEInvoiceView-processItems-poDetails" />
							</list>
						</property>
					</bean>
		        </property>
			</bean>
		</property>
		<property name="items">
			<list>
				<bean parent="Uif-MessageField" p:messageText=" " />
			</list>
		</property>
	</bean>

    <bean id="OLEInvoiceView-accountingLines-parent" abstract="true"
    		parent="OLEInvoiceView-processItems-SubCollection">
        <property name="headerText" value="Accounting Lines" />
        <property name="propertyName" value="sourceAccountingLines" />
        <property name="renderAddLine" value="true"/>
        <property name="renderLineActions" value="true"/>
		<property name="layoutManager">
			<bean
				class="org.kuali.ole.select.document.krad.OleInvoiceAccountingLinesLayout"
				p:template="/WEB-INF/ftl/ole-invoice-po.ftl" p:templateName="ole_accounting_items">
	
				<property name="accountNumberQuickfinder">
					<bean parent="Uif-QuickFinder" p:dataObjectClassName="org.kuali.ole.coa.businessobject.Account"
						p:fieldConversions="chartOfAccountsCode:chartOfAccountsCode,accountNumber:accountNumber"
						p:lookupParameters="chartOfAccountsCode:chartOfAccountsCode" />
				</property>
				<property name="subAccountNumberQuickfinder">
					<bean parent="Uif-QuickFinder" p:dataObjectClassName="org.kuali.ole.coa.businessobject.SubAccount"
						p:fieldConversions="chartOfAccountsCode:chartOfAccountsCode,accountNumber:accountNumber,subAccountNumber:subAccountNumber"
						p:lookupParameters="chartOfAccountsCode:chartOfAccountsCode,accountNumber:accountNumber" />
				</property>
				<property name="financialObjectCodeQuickfinder">
					<bean parent="Uif-QuickFinder" p:dataObjectClassName="org.kuali.ole.coa.businessobject.ObjectCode"
						p:fieldConversions="financialObjectCode:financialObjectCode"
						p:lookupParameters="chartOfAccountsCode:chartOfAccountsCode" />
				</property>
				<property name="financialSubObjectCodeQuickfinder">
					<bean parent="Uif-QuickFinder" p:dataObjectClassName="org.kuali.ole.coa.businessobject.SubObjectCode"
						p:fieldConversions="chartOfAccountsCode:chartOfAccountsCode,accountNumber:accountNumber,financialObjectCode:financialObjectCode,financialSubObjectCode,financialSubObjectCode"
						p:lookupParameters="financialObjectCode:financialObjectCode" />
				</property>
				<property name="projectCodeQuickfinder">
					<bean parent="Uif-QuickFinder" p:dataObjectClassName="org.kuali.ole.coa.businessobject.ProjectCode"
						p:fieldConversions="code:projectCode" />
				</property>
			</bean>
		</property>
		<property name="items">
			<list>
				<bean parent="Uif-MessageField" p:messageText=" " />
			</list>
		</property>
        <property name="addLineActions">
            <list>
                <bean id="PoAccountingLine" parent="Uif-PrimaryActionButton-Small" p:methodToCall="addPOAccountingLine" p:actionLabel="Add" p:title="Add PO Accounting Line"/>
            </list>
        </property>
    </bean>

    <bean id="OLEInvoiceView-processItems-accountingLines" parent="OLEInvoiceView-accountingLines-parent">
        <property name="collectionObjectClass" value="org.kuali.ole.select.businessobject.OlePurchaseOrderAccount" />
        <property name="addLineActions">
            <list>
                <bean parent="Uif-PrimaryActionButton-Small" p:methodToCall="addPOAccountingLine" p:actionLabel="Add" p:title="Add PO Accounting Line"/>
            </list>
        </property>
    </bean>

    <bean id="OLEInvoiceView-processItems-invoiceNotes"  parent="Uif-Disclosure-TableSubCollection-WithinSubSection" p:layoutManager.numberOfColumns="3"
          p:layoutManager.applyDefaultCellWidths="false" p:style="width:auto" p:disclosure.defaultOpen="false">
        <property name="headerText" value="Line Item Note for Invoice"/>
        <property name="collectionObjectClass" value="org.kuali.ole.select.businessobject.OleInvoiceNote" />
        <property name="propertyName" value="invoiceNotes" />
        <property name="layoutManager.renderSequenceField" value="false" />
        <property name="layoutManager.richTable.templateOptions" value="false" />
        <property name="layoutManager.richTable.render" value="false"/>
        <property name="renderAddLine" value="true"/>
        <property name="renderLineActions" value="true"/>
        <property name="items">
            <list>
                <bean id="invoice-note"  parent="Uif-InputField" p:label="Invoice Note" p:propertyName="note" p:required="false" />
            </list>
        </property>
    </bean>

	<bean id="OleInvoiceView-invoiceItems" parent="Uif-CollectionGroupBase" 
		p:renderLineActions="false" p:RenderInactiveToggleButton="false" p:renderAddLine="false">
		<property name="propertyName" value="items" />
        <property name="collectionObjectClass" value="org.kuali.ole.select.businessobject.OleInvoiceItem" />
		<property name="cssClasses">
			<list>
				<value>uif-disclosure</value>
		        <value>uif-tableCollectionSection</value>
			</list>
		</property>
		<property name="header">
			<bean parent="Uif-SubCollectionHeader">
				<property name="headerText" value="Current Items" />
				<property name="lowerGroup">
					<bean parent="Uif-InactiveItemsActionsGroup" />
				</property>
			</bean>
		</property>
		<property name="disclosure.render" value="true" />
		<property name="layoutManager">
			<bean
				class="org.kuali.ole.select.document.krad.OleInvoiceItemsLayout" p:pageSize="25"
				p:template="/WEB-INF/ftl/ole-invoice-po.ftl" p:templateName="ole_invoice_items"
				p:actionRefreshId="OLEInvoiceView-processItems-Wrapper">
		        <property name="rowDetailsGroup">
					<bean parent="Uif-VerticalBoxGroup">
						<property name="items">
							<list>
								<bean parent="Uif-HorizontalBoxGroup">
									<property name="items">
										<list>
											<bean id="invoiceItem_closePO" parent="Uif-DataField"
												p:propertyName="closePurchaseOrderIndicator" p:label="Close P.O">
											</bean>
											<bean id="invoiceItem_subscriptionOverlay" parent="Uif-InputField"
												p:propertyName="subscriptionOverlap" p:label="Check Subscription Date Overlap"
												p:labelPlacement="LEFT">
												<property name="control">
													<bean parent="Uif-CheckboxControl" />
												</property>
											</bean>
										
											<bean id="invoiceItem_subscriptionFromDate" parent="Uif-InputField"
												p:propertyName="subscriptionFromDate" p:label="Subscription From Date "
												p:labelPlacement="LEFT">
												<property name="control">
													<bean parent="Uif-DateControl" p:size="10" />
												</property>
											</bean>
										
											<bean id="invoiceItem_subscriptionToDate" parent="Uif-InputField"
												p:propertyName="subscriptionToDate" p:label="To Date "
												p:labelPlacement="LEFT">
												<property name="control">
													<bean parent="Uif-DateControl" p:size="10" />
												</property>
											</bean>
										
											<bean id="invoiceItem_RouteToRequestor" parent="Uif-InputField"
												p:propertyName="itemRouteToRequestorIndicator" p:label="Route To Requestor"
												p:render="@{document.foreignCurrencyFlag}">
												<property name="control">
													<bean parent="Uif-CheckboxControl" />
												</property>
											</bean>
										
											<bean id="invoiceItem_PublicView" parent="Uif-InputField"
												p:propertyName="itemPublicViewIndicator" p:label="Public View"
												p:render="@{document.foreignCurrencyFlag}">
												<property name="control">
													<bean parent="Uif-CheckboxControl" />
												</property>
											</bean>
										</list>
									</property>
								</bean>
		                        <ref bean="OLEInvoiceView-invoiceItem-poDetails" />
							</list>
						</property>
					</bean>
		        </property>
				<property name="relinkQuickfinder">
					<bean parent="Uif-QuickFinder"
						p:dataObjectClassName="org.kuali.ole.select.businessobject.OLEPurchaseOrderItemSearch"
						p:fieldConversions="tempItemIdentifier:tempItemIdentifier,purapDocumentIdentifier:purchaseOrderIdentifier,purchaseOrderItemID:tempPurchaseOrderIdentifier,purchaseOrderItemID:poItemIdentifier,localId:itemTitleId,itemDescription:itemDescription,accountsPayableLinkIdentifier:accountsPayablePurchasingDocumentLinkIdentifier,poItemPrice:purchaseOrderItemUnitPrice,docFormat:docFormat,itemLineNumber:itemLineNumber"
						p:lookupParameters="purapDocument.vendorName:vendorName,purapDocument.vendorDetailAssignedIdentifier:vendorDetailAssignedIdentifier,purapDocument.vendorHeaderGeneratedIdentifier:vendorHeaderGeneratedIdentifier" />
				</property>
		        <property name="pager">
		        	<bean parent="Uif-Pager" p:linkScript="oleInvoicePager(this,'OleInvoiceView-invoiceItems')" />
		        </property>
			</bean>
		</property>
		<property name="lineActions">
			<list>
				<bean id="CurrentItem_deleteInvoiceItem" parent="Uif-SecondaryActionButton-Small"
					p:actionLabel="Delete" p:methodToCall="deleteInvoice"
					p:render="@{document.documentHeader.workflowDocument.initiated or document.documentHeader.workflowDocument.saved}" />
				<bean id="CurrentItem_unlinkInvoiceItem" parent="Uif-SecondaryActionButton-Small"
					p:actionLabel="UnLink" p:methodToCall="unlinkInvoice"
					p:render="@{(document.documentHeader.workflowDocument.initiated or document.documentHeader.workflowDocument.saved or document.documentHeader.workflowDocument.enroute) and (#line.itemTitleId ne null or #line.tempPurchaseOrderIdentifier ne null)}" />
			</list>
		</property>
		<property name="items">
			<list>
				<bean parent="Uif-MessageField" p:messageText=" " />
			</list>
		</property>
	</bean>

    <bean id="OLEInvoiceView-invoiceItem-poDetails" parent="Uif-VerticalBoxSection">
        <property name="items">
            <list>
                <ref bean="OLEInvoiceView-InvoiceItem-RequisitionView"/>
                <ref bean="OLEInvoiceView-InvoiceItem-LineItemReceivingView"/>
                <ref bean="OLEInvoiceView-InvoiceItem-CorrectionView"/>
                <ref bean="OLEInvoiceView-InvoiceItem-PaymentRequestView"/>
                <ref bean="OLEInvoiceView-InvoiceItem-CreditMemoView"/>
                <ref bean="OLEInvoiceView-ProcessTitle-PaymentRequestHistory"/>
                <ref bean="OLEInvoiceView-ProcessTitle-CreditMemoHistory"/>
                <ref bean="OLEInvoiceView-Item-accountingLines"/>
                <ref bean="OLEInvoiceView-AdditionalCharges-offsetAccountingLines"/>
                <ref bean="OLEInvoiceView-invoiceNotes"/>
                <ref bean="OLEInvoiceView-donors"/>
            </list>
        </property>
    </bean>

    <bean id="OLEInvoiceView-invoiceItem-relatedView" parent="Uif-HorizontalFieldGroup"  p:label="View Related Documents" p:style="width:auto">
        <property name="items">
            <list>
                <ref bean="OLEInvoiceView-InvoiceItem-RequisitionView"/>
                <ref bean="OLEInvoiceView-InvoiceItem-LineItemReceivingView"/>
                <ref bean="OLEInvoiceView-InvoiceItem-CorrectionView"/>
                <ref bean="OLEInvoiceView-InvoiceItem-PaymentRequestView"/>
                <ref bean="OLEInvoiceView-InvoiceItem-CreditMemoView"/>
                <ref bean="OLEInvoiceView-ProcessTitle-PaymentRequestHistory"/>
                <ref bean="OLEInvoiceView-ProcessTitle-CreditMemoHistory"/>
            </list>
        </property>
    </bean>

    <bean id="OLEInvoiceView-ProcessTitle-PaymentRequestHistory"  parent="Uif-Disclosure-TableSubCollection-WithinSection"  p:layoutManager.numberOfColumns="1"
          p:layoutManager.applyDefaultCellWidths="false" p:style="width:auto" p:disclosure.defaultOpen="false"
          p:render="@{#line.relatedViews ne null and #line.relatedViews.paymentHistoryPaymentRequestViews ne null and #line.relatedViews.paymentHistoryPaymentRequestViews.size()>0}">
        <property name="collectionObjectClass" value="org.kuali.ole.module.purap.businessobject.PaymentRequestView" />
        <property name="headerText" value="Payment Request History" />
        <property name="propertyName" value="relatedViews.paymentHistoryPaymentRequestViews" />
        <property name="layoutManager.renderSequenceField" value="false" />
        <property name="layoutManager.richTable.templateOptions" value="false"/>
        <property name="layoutManager.richTable.render" value="false"/>
        <property name="renderAddLine" value="false"/>
        <property name="renderLineActions" value="false"/>
        <!--<property name="collectionLookup.render" value="true"/>-->
        <property name="items">
            <list>
                <bean parent="Uif-DataField" p:propertyName="purapDocumentIdentifier" p:label="PREQ #"  />
                <bean parent="Uif-DataField" p:propertyName="invoiceNumber" p:label="Invoice #" />
                <bean parent="Uif-DataField" p:propertyName="purchaseOrderIdentifier" p:label="PO #" />
                <bean parent="Uif-DataField" p:propertyName="applicationDocumentStatus" p:label="PREQ Status" />
                <bean parent="Uif-DataField" p:propertyName="vendorName" p:label="Vendor Name" />
                <bean parent="Uif-DataField" p:propertyName="vendorCustomerNumber" p:label="Customer #" />
                <bean parent="Uif-DataField" p:propertyName="totalAmount" p:label="Amount" />
                <bean parent="Uif-DataField" p:propertyName="paymentRequestPayDate" p:label="Pay Date" />
            </list>
        </property>
        <property name="subCollections">
            <list>
                <ref bean="OLEInvoice-ProcessTitle-relatedDocumentDetails-notes" />
            </list>
        </property>
    </bean>

    <bean id="OLEInvoiceView-ProcessTitle-CreditMemoHistory"  parent="Uif-Disclosure-TableSubCollection-WithinSection"  p:layoutManager.numberOfColumns="1"
          p:layoutManager.applyDefaultCellWidths="false" p:style="width:auto" p:disclosure.defaultOpen="false"
          p:render="@{#line.relatedViews ne null and #line.relatedViews.paymentHistoryCreditMemoViews ne null and #line.relatedViews.paymentHistoryCreditMemoViews.size()>0}">
        <property name="collectionObjectClass" value="org.kuali.ole.module.purap.businessobject.CreditMemoView" />
        <property name="propertyName" value="relatedViews.paymentHistoryCreditMemoViews" />
        <property name="headerText" value="Credit Memo History" />
        <property name="layoutManager.renderSequenceField" value="false" />
        <property name="layoutManager.richTable.templateOptions" value="false"/>
        <property name="layoutManager.richTable.render" value="false"/>
        <property name="renderAddLine" value="false"/>
        <property name="renderLineActions" value="false"/>
        <!--<property name="collectionLookup.render" value="true"/>-->
        <property name="items">
            <list>
                <bean parent="Uif-DataField" p:propertyName="purapDocumentIdentifier" p:label="CM #" />
                <bean parent="Uif-DataField" p:propertyName="creditMemoNumber" p:label="Vendor CM #"  />
                <bean parent="Uif-DataField" p:propertyName="paymentRequestIdentifier" p:label="PREQ #" />
                <bean parent="Uif-DataField" p:propertyName="purchaseOrderIdentifier" p:label="PO #" />
                <bean parent="Uif-DataField" p:propertyName="applicationDocumentStatus" p:label="Credit Memo Status" />
                <bean parent="Uif-DataField" p:propertyName="vendorName" p:label="Vendor Name" />
                <bean parent="Uif-DataField" p:propertyName="vendorCustomerNumber" p:label="Customer #" />
                <bean parent="Uif-DataField" p:propertyName="totalAmount" p:label="Amount" />
                <bean parent="Uif-DataField" p:propertyName="accountsPayableApprovalTimestamp" p:label="APAD Date" />
            </list>
        </property>
        <property name="subCollections">
            <list>
                <ref bean="OLEInvoice-ProcessTitle-relatedDocumentDetails-notes" />
            </list>
        </property>
    </bean>

    <bean id="OLEInvoiceView-invoiceNotes"  parent="Uif-Disclosure-TableSubCollection-WithinSubSection" p:layoutManager.numberOfColumns="3"
          p:layoutManager.applyDefaultCellWidths="false" p:style="width:1080px" p:disclosure.defaultOpen="false">
        <property name="headerText" value="Line Item Note for Invoice"/>
        <property name="collectionObjectClass" value="org.kuali.ole.select.businessobject.OleInvoiceNote" />
        <property name="propertyName" value="notes" />
        <property name="layoutManager.renderSequenceField" value="false" />
        <property name="layoutManager.richTable.templateOptions" value="false" />
        <property name="layoutManager.richTable.render" value="false"/>
        <property name="renderAddLine" value="true"/>
        <property name="renderLineActions" value="true"/>
        <property name="subCollectionSuffix" value="@{#lineSuffix}" />
        <property name="items">
            <list>
                <bean id="OLEInvoiceView-invoice-note"  parent="Uif-InputField" p:label="Invoice Note" p:propertyName="note" p:required="false" />
            </list>
        </property>
        <property name="lineActions">
            <list>
                <bean id="deletePO_Note" parent="Uif-PrimaryActionButton-Small" p:methodToCall="deleteNotes" p:actionLabel="Delete" />
            </list>
        </property>
    </bean>

    <bean id="OLEInvoiceView-donors"  parent="Uif-Disclosure-TableSubCollection-WithinSubSection" p:layoutManager.numberOfColumns="3"
          p:layoutManager.applyDefaultCellWidths="false" p:style="width:1080px" p:disclosure.defaultOpen="false"
          p:render="@{#line.oleDonors ne null and #line.oleDonors.size()>0}">
        <property name="headerText" value="Donor"/>
        <property name="collectionObjectClass" value="org.kuali.ole.select.bo.OLELinkPurapDonor" />
        <property name="propertyName" value="oleDonors" />
        <property name="layoutManager.renderSequenceField" value="false" />
        <property name="layoutManager.richTable.templateOptions" value="false" />
        <property name="layoutManager.richTable.render" value="false"/>
        <property name="renderAddLine" value="false"/>
        <property name="renderLineActions" value="false"/>
        <property name="items">
            <list>
                <bean id="OLEInvoiceView-donor"  parent="Uif-LinkField" p:style="word-break: break-all;word-wrap: break-word" p:linkText="@{#line.donorCode}" p:target="_blank" p:href="inquiry?methodToCall=start&amp;donorId=@{#line.donorId}&amp;dataObjectClassName=org.kuali.ole.select.bo.OLEDonor" p:align="CENTER"/>
            </list>
        </property>
    </bean>

    <bean id="OLEInvoiceView-ProcessItem-InvoiceTotal" parent="Uif-Disclosure-VerticalBoxSection" p:style="width:auto">
        <property name="headerText" value="" />
        <property name="items">
            <list>
                <bean id="OLEInvoiceView-invoiceTotal" parent="Uif-InputField" p:label="Invoice Total Prior to Additional Charges" p:propertyName="itemTotal" p:readOnly="true"/>
                <bean id="OLEInvoiceView-foreignInvoiceTotal" parent="Uif-InputField" p:label="Foreign Invoice Total Prior to Additional Charges" p:propertyName="foreignItemTotal" p:readOnly="true" p:render="@{document.foreignCurrencyFlag}"/>
            </list>
        </property>
    </bean>

    <bean id="OLEInvoiceView-ProcessItem-AdditionalCharges-Wrapper" parent="Uif-VerticalBoxGroup">
    	<property name="items">
    		<list>
		      <bean parent="Uif-SectionHeader">
		      	<property name="inlineComponents">
		      		<list>
		      			<bean parent="Uif-ActionImage" p:hidden="@{filterAdditionalCharges}"
			      				p:refreshId="OLEInvoiceView-ProcessItem-AdditionalCharges-Wrapper" p:methodToCall="refresh">
		      				<property name="actionImage">
				      			<bean parent="Uif-Image" p:source="@{#ThemeImages}h2_expand.png"/>
		      				</property>
		      				<property name="additionalSubmitData">
		      					<map>
		      						<entry key="filterAdditionalCharges" value="true" />
		      					</map>
		      				</property>
		      			</bean>
		      			<bean parent="Uif-ActionImage" p:hidden="@{!filterAdditionalCharges}"
			      				p:refreshId="OLEInvoiceView-ProcessItem-AdditionalCharges-Wrapper" p:methodToCall="refresh">
		      				<property name="actionImage">
				      			<bean parent="Uif-Image" p:source="@{#ThemeImages}h2_collapse.png"/>
		      				</property>
		      				<property name="additionalSubmitData">
		      					<map>
		      						<entry key="filterAdditionalCharges" value="false" />
		      					</map>
		      				</property>
		      			</bean>
		      			<bean parent="Uif-ActionLink" p:actionLabel="Additional Charges"
			      				p:refreshId="OLEInvoiceView-ProcessItem-AdditionalCharges-Wrapper" p:methodToCall="refresh">
		      				<property name="additionalSubmitData">
		      					<map>
		      						<entry key="filterAdditionalCharges" value="@{!filterAdditionalCharges}" />
		      					</map>
		      				</property>
		      			</bean>
		      		</list>
		      	</property>
		      	<property name="headerText" value="[0][1] [2]" />
		      </bean>
              <ref bean="OLEInvoiceView-ProcessItem-AdditionalCharges" />
    		</list>
    	</property>
    </bean>
    
    <bean id="OLEInvoiceView-ProcessItem-AdditionalCharges" parent="Uif-VerticalBoxSection" p:style="width:1468px"
           p:filterModelProperty="filterAdditionalCharges">
        <property name="items">
            <list>
                <bean parent="Uif-GridSection" p:layoutManager.numberOfColumns="2"  >
                    <property name="items">
                        <list>
                            <ref bean="OLEInvoiceView-AdditionalCharges-additionalItems"/>
                            <!-- <bean parent="Uif-GridSection" p:layoutManager.numberOfColumns="1"
                                  p:layoutManager.applyDefaultCellWidths="false" p:style="width:1300px" p:align="CENTER">
                                <property name="items">
                                    <list>

                                        <ref bean="OLEInvoiceView-AdditionalCharges-additionalItems"/>
                                    </list>
                                </property>
                            </bean>-->
                            <bean parent="OLEInvoice-AdditionalCharges-Prorate" p:align="CENTER" p:style="float:middle"/>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>

    <bean id="OLEInvoiceView-AdditionalCharges-additionalItems"  parent="Uif-Disclosure-TableCollectionSection"  p:layoutManager.suppressLineWrapping="true"
          p:renderInactiveToggleButton="false" p:style="width:1290px" >
        <property name="collectionObjectClass" value="org.kuali.ole.select.businessobject.OleInvoiceItem" />
        <property name="propertyName" value="items" />
        <property name="layoutManager.renderSequenceField" value="false" />
        <property name="layoutManager.richTable.templateOptions" value="false"/>
        <property name="layoutManager.richTable.render" value="false"/>
        <property name="renderAddLine" value="false"/>
        <property name="renderLineActions" value="false"/>
        <!--<property name="collectionLookup.render" value="true"/>-->
        <property name="items">
            <list>
                <bean id="additionalItem_description" parent="Uif-MessageField" p:label="Item Type" p:width="50%" p:messageText="@{#line.itemType.itemTypeDescription}"/>

                <!--<bean id="additionalItem_originalAmt" parent="Uif-DataField" p:label="Open Qty" p:propertyName="itemUnitPrice"/>

                <bean id="additionalItem_encumberedAmt" parent="Uif-DataField" p:label="Title" p:propertyName="itemUnitPrice"/>-->

                <bean id="additionalItem_extendedCost" parent="Uif-InputField" p:label="Price" p:propertyName="additionalUnitPrice" p:readOnly="@{document.foreignCurrencyFlag}"/>

                <bean id="additionalItem_foreignPrice" parent="Uif-InputField" p:label="Foreign Price" p:propertyName="additionalForeignUnitCost" p:render="@{document.foreignCurrencyFlag}"/>

                <bean id="additionalItem_itemDesc" parent="Uif-InputField" p:label="Description" p:propertyName="itemDescription"><!--
                    <property name="controlField">
                        <bean parent="Uif-TextAreaControl" p:rows="5" p:cols="50" />
                    </property>-->
                </bean>
            </list>
        </property>
        <property name="filters">
            <list>
                <bean parent="Uif-ConditionalCollectionFilter" p:expression="#line.itemType.itemTypeDescription ne 'Qty'"/>
            </list>
        </property>
        <property name="subCollections">
            <list>
                <bean id="OLEInvoiceView-accountingLines" parent="OLEInvoiceView-AdditionalCharges-accountingLines" />
            </list>
        </property>
    </bean>

    <bean id="OLEInvoiceView-AdditionalCharges-accountingLines" parent="OLEInvoiceView-accountingLines-parent">
        <property name="collectionObjectClass" value="org.kuali.ole.module.purap.businessobject.InvoiceAccount" />
        <property name="addLineActions">
            <list>
                <bean id="addSourceAccountingLine" parent="Uif-PrimaryActionButton-Small" p:methodToCall="addSourceAccountingLine" p:actionLabel="Add" p:title="Add Source Accounting Line" p:ajaxSubmit="true"  p:successCallback="selectNoProrate()"/>
            </list>
        </property>
    </bean>
    
    <bean id="OLEInvoiceView-AdditionalCharges-offsetAccountingLines"  parent="Uif-Disclosure-TableSubCollection-WithinSection"  p:layoutManager.numberOfColumns="10"
          p:layoutManager.applyDefaultCellWidths="false" p:style="width:1360"  p:disclosure.defaultOpen="true" p:render="@{document.offsetAccountIndicator or document.paymentMethodIdentifier eq '7'}">
        <property name="headerText" value="Offset Accounting Lines" />
        <property name="collectionObjectClass" value="org.kuali.ole.select.businessobject.OLEInvoiceOffsetAccountingLine" />
        <property name="propertyName" value="sourceAccountingLineList" />
        <property name="layoutManager.renderSequenceField" value="false" />
        <property name="layoutManager.richTable.templateOptions" value="false"/>
        <property name="layoutManager.richTable.render" value="false"/>
        <property name="renderAddLine" value="true"/>
        <property name="renderLineActions" value="true"/>
        <property name="items">
            <list>

                <bean id="oleAdditionalItem-chartOfAccountsCode"  parent="Uif-InputField"  p:label="Chart" p:propertyName="chartOfAccountsCode" p:required="false"
                      p:optionsFinderClass="org.kuali.ole.coa.businessobject.options.SimpleChartValuesFinder" >
                    <property name="control">
                        <bean parent="Uif-DropdownControl" />
                    </property>
                </bean>
                <bean  id="OleInvoice-accountNo" parent="Uif-InputField" p:propertyName="accountNumber"  p:label="Account Number"  p:required="true" >
                    <property name="control">
                        <bean parent="Uif-TextControl" p:size="10"  p:disabled="false"/>
                    </property>
                    <property name="quickfinder">
                        <bean parent="Uif-QuickFinder" p:dataObjectClassName="org.kuali.ole.coa.businessobject.Account"
                              p:fieldConversions="chartOfAccountsCode:chartOfAccountsCode,accountNumber:accountNumber" p:lookupParameters="chartOfAccountsCode:chartOfAccountsCode,subFundGroupCode:subFundGroupCode,vendorName:vendorName"/>
                    </property>
                </bean>
                <bean  id="additionalItem-subAccountNo"  parent="Uif-InputField" p:propertyName="subAccountNumber"  p:label=" Sub Account Number">
                    <property name="quickfinder">
                        <bean parent="Uif-QuickFinder" p:dataObjectClassName="org.kuali.ole.coa.businessobject.SubAccount"
                              p:fieldConversions="chartOfAccountsCode:chartOfAccountsCode,accountNumber:accountNumber,subAccountNumber:subAccountNumber" p:lookupParameters="chartOfAccountsCode:chartOfAccountsCode,accountNumber:accountNumber"/>
                    </property>
                    <property name="control">
                        <bean parent="Uif-TextControl" p:size="10" />
                    </property>
                </bean>
                <bean id="additionalItem-financialObjectCd" parent="Uif-InputField" p:propertyName="financialObjectCode"  p:label="Object Code"
                      p:required="true">
                    <property name="quickfinder">
                        <bean parent="Uif-QuickFinder" p:dataObjectClassName="org.kuali.ole.coa.businessobject.ObjectCode"
                              p:fieldConversions="financialObjectCode:financialObjectCode" p:lookupParameters="chartOfAccountsCode:chartOfAccountsCode"/>
                    </property>
                    <property name="control">
                        <bean parent="Uif-TextControl" p:size="10" />
                    </property>
                </bean>
                <bean id="additionalItem-financialSubObjectCd" parent="Uif-InputField" p:propertyName="financialSubObjectCode"
                      p:label="Sub ObjectCode">
                    <property name="quickfinder">
                        <bean parent="Uif-QuickFinder" p:dataObjectClassName="org.kuali.ole.coa.businessobject.SubObjectCode"
                              p:fieldConversions="chartOfAccountsCode:chartOfAccountsCode,accountNumber:accountNumber,financialObjectCode:financialObjectCode,financialSubObjectCode:financialSubObjectCode" p:lookupParameters="financialObjectCode:financialObjectCode"/>
                    </property>
                    <property name="control">
                        <bean parent="Uif-TextControl" p:size="10" />
                    </property>
                </bean>
                <bean id="additionalItem-projectCd" parent="Uif-InputField" p:propertyName="projectCode"  p:label="Project">
                    <property name="quickfinder">
                        <bean parent="Uif-QuickFinder" p:dataObjectClassName="org.kuali.ole.coa.businessobject.ProjectCode"
                              p:fieldConversions="code:projectCode" />
                    </property>
                    <property name="control">
                        <bean parent="Uif-TextControl" p:size="10" />
                    </property>
                </bean>
                <bean  id="oleAdditionalItem-orgRefId" parent="Uif-InputField" p:label="Org Ref Id" p:propertyName="organizationReferenceId" p:required="false">
                    <property name="control">
                        <bean parent="Uif-TextControl" p:size="10" />
                    </property>
                </bean>
                <bean id="oleAdditionalItem-amount" parent="Uif-InputField" p:label="Dollar $" p:propertyName="bigDecimalAmount">
                    <property name="control">
                        <bean parent="Uif-TextControl" p:size="10" />
                    </property>
                </bean>
                <bean id="oleAdditionalItem-percent" parent="Uif-InputField" p:label="Percentage" p:propertyName="accountLinePercent" p:required="true">
                    <property name="control">
                        <bean parent="Uif-TextControl" p:size="10" />
                    </property>
                </bean>
            </list>
        </property>
        <property name="addLineActions">
            <list>
                <bean id="oleAddSourceAccountingLine" parent="Uif-PrimaryActionButton-Small" p:methodToCall="addOffsetSourceAccountingLine" p:actionLabel="Add" p:title="Add Source Accounting Line" p:ajaxSubmit="true" />
            </list>
        </property>
    </bean>

    <bean id="OLEInvoiceView-ProcessItem-GrandTotal"   parent="Uif-GridSection" p:layoutManager.numberOfColumns="2" p:style="width:auto">
        <property name="items">
            <list>
                <bean id="myAccount_grandTotal" parent="Uif-DataField" p:propertyName="grantTotal" p:label="Grand Total"/>
                <bean id="myAccount_foreignGrandTotal" parent="Uif-DataField" p:propertyName="foreignGrandTotal" p:label="Foreign Grand Total" p:render="@{document.foreignCurrencyFlag}"/>
            </list>
        </property>
    </bean>

    <bean id="OLEInvoiceView-InvoiceItem-RequisitionView"  parent="Uif-Disclosure-TableSubCollection-WithinSection"  p:layoutManager.numberOfColumns="1"
          p:layoutManager.applyDefaultCellWidths="false" p:style="width:auto" p:disclosure.defaultOpen="false"
          p:render="@{#line.relatedViews ne null and #line.relatedViews.relatedRequisitionViews ne null and #line.relatedViews.relatedRequisitionViews.size()>0}">
        <property name="collectionObjectClass" value="org.kuali.ole.module.purap.businessobject.AbstractRelatedView" />
        <property name="headerText" value="Requisitions" />
        <property name="propertyName" value="relatedViews.relatedRequisitionViews" />
        <property name="layoutManager.renderSequenceField" value="false" />
        <property name="layoutManager.richTable.templateOptions" value="false"/>
        <property name="layoutManager.richTable.render" value="false"/>
        <property name="renderAddLine" value="false"/>
        <property name="renderLineActions" value="false"/>
        <!--<property name="collectionLookup.render" value="true"/>-->
        <property name="items">
            <list>
                <bean id="RequisitionView_notes" parent="Uif-LinkField" p:style="font-weight:bold;" p:link.href="@{#line.url}"  p:link.linkText="@{#line.documentIdentifierString}"  p:target="_blank"  p:label="@{#line.documentLabel}"/>
            </list>
        </property>
        <property name="subCollections">
            <list>
                <ref bean="OLEInvoice-ProcessTitle-relatedDocumentDetails-notes" />
            </list>
        </property>
    </bean>

    <bean id="OLEInvoiceView-InvoiceItem-LineItemReceivingView"  parent="Uif-Disclosure-TableSubCollection-WithinSection"  p:layoutManager.numberOfColumns="1"
          p:layoutManager.applyDefaultCellWidths="false" p:style="width:auto" p:disclosure.defaultOpen="false"
          p:render="@{#line.relatedViews ne null and #line.relatedViews.relatedLineItemReceivingViews ne null and #line.relatedViews.relatedLineItemReceivingViews.size()>0}">
        <property name="collectionObjectClass" value="org.kuali.ole.module.purap.businessobject.AbstractRelatedView" />
        <property name="headerText" value="Line Item Receiving" />
        <property name="propertyName" value="relatedViews.relatedLineItemReceivingViews" />
        <property name="layoutManager.renderSequenceField" value="false" />
        <property name="layoutManager.richTable.templateOptions" value="false"/>
        <property name="layoutManager.richTable.render" value="false"/>
        <property name="renderAddLine" value="false"/>
        <property name="renderLineActions" value="false"/>
        <!--<property name="collectionLookup.render" value="true"/>-->
        <property name="items">
            <list>
                <bean id="LineItemReceivingView_notes" parent="Uif-LinkField" p:style="font-weight:bold;" p:link.href="@{#line.url}"  p:link.linkText="@{#line.documentIdentifierString}"  p:target="_blank"  p:label="@{#line.documentLabel}"/>
            </list>
        </property>
        <property name="subCollections">
            <list>
                <ref bean="OLEInvoice-ProcessTitle-relatedDocumentDetails-notes" />
            </list>
        </property>
    </bean>

    <bean id="OLEInvoiceView-InvoiceItem-CorrectionView"  parent="Uif-Disclosure-TableSubCollection-WithinSection"  p:layoutManager.numberOfColumns="1"
          p:layoutManager.applyDefaultCellWidths="false" p:style="width:auto" p:disclosure.defaultOpen="false"
          p:render="@{#line.relatedViews ne null and #line.relatedViews.relatedCorrectionReceivingViews ne null and #line.relatedViews.relatedCorrectionReceivingViews.size()>0}">
        <property name="collectionObjectClass" value="org.kuali.ole.module.purap.businessobject.AbstractRelatedView" />
        <property name="propertyName" value="relatedViews.relatedCorrectionReceivingViews" />
        <property name="headerText" value="Correction Receiving" />
        <property name="layoutManager.renderSequenceField" value="false" />
        <property name="layoutManager.richTable.templateOptions" value="false"/>
        <property name="layoutManager.richTable.render" value="false"/>
        <property name="renderAddLine" value="false"/>
        <property name="renderLineActions" value="false"/>
        <!--<property name="collectionLookup.render" value="true"/>-->
        <property name="items">
            <list>
                <bean id="CorrectionView_notes" parent="Uif-LinkField" p:style="font-weight:bold;" p:link.href="@{#line.url}"  p:link.linkText="@{#line.documentIdentifierString}"  p:target="_blank"  p:label="@{#line.documentLabel}"/>
            </list>
        </property>
        <property name="subCollections">
            <list>
                <ref bean="OLEInvoice-ProcessTitle-relatedDocumentDetails-notes" />
            </list>
        </property>
    </bean>

    <bean id="OLEInvoiceView-InvoiceItem-PaymentRequestView"  parent="Uif-Disclosure-TableSubCollection-WithinSection"  p:layoutManager.numberOfColumns="1"
          p:layoutManager.applyDefaultCellWidths="false" p:style="width:auto" p:disclosure.defaultOpen="false"
          p:render="@{#line.relatedViews ne null and #line.relatedViews.relatedPaymentRequestViews ne null and #line.relatedViews.relatedPaymentRequestViews.size()>0}">
        <property name="collectionObjectClass" value="org.kuali.ole.module.purap.businessobject.AbstractRelatedView" />
        <property name="headerText" value="Payment Request" />
        <property name="propertyName" value="relatedViews.relatedPaymentRequestViews" />
        <property name="layoutManager.renderSequenceField" value="false" />
        <property name="layoutManager.richTable.templateOptions" value="false"/>
        <property name="layoutManager.richTable.render" value="false"/>
        <property name="renderAddLine" value="false"/>
        <property name="renderLineActions" value="false"/>
        <!--<property name="collectionLookup.render" value="true"/>-->
        <property name="items">
            <list>
                <bean id="PaymentRequestView_notes" parent="Uif-LinkField" p:style="font-weight:bold;" p:link.href="@{#line.url}"  p:link.linkText="@{#line.documentIdentifierString}"  p:target="_blank"  p:label="@{#line.documentLabel}"/>
            </list>
        </property>
        <property name="subCollections">
            <list>
                <ref bean="OLEInvoice-ProcessTitle-relatedDocumentDetails-notes" />
            </list>
        </property>
    </bean>

    <bean id="OLEInvoiceView-InvoiceItem-CreditMemoView"  parent="Uif-Disclosure-TableSubCollection-WithinSection"  p:layoutManager.numberOfColumns="1"
          p:layoutManager.applyDefaultCellWidths="false" p:style="width:auto" p:disclosure.defaultOpen="false"
          p:render="@{#line.relatedViews ne null and #line.relatedViews.relatedCreditMemoViews ne null and #line.relatedViews.relatedCreditMemoViews.size()>0}">
        <property name="collectionObjectClass" value="org.kuali.ole.module.purap.businessobject.AbstractRelatedView" />
        <property name="headerText" value="Credit Memo" />
        <property name="propertyName" value="relatedViews.relatedCreditMemoViews" />
        <property name="layoutManager.renderSequenceField" value="false" />
        <property name="layoutManager.richTable.templateOptions" value="false"/>
        <property name="layoutManager.richTable.render" value="false"/>
        <property name="renderAddLine" value="false"/>
        <property name="renderLineActions" value="false"/>
        <!--<property name="collectionLookup.render" value="true"/>-->
        <property name="items">
            <list>
                <bean id="CreditMemoView_notes" parent="Uif-LinkField" p:style="font-weight:bold;" p:link.href="@{#line.url}"  p:link.linkText="@{#line.documentIdentifierString}"  p:target="_blank"  p:label="@{#line.documentLabel}"/>
            </list>
        </property>
        <property name="subCollections">
            <list>
                <ref bean="OLEInvoice-ProcessTitle-relatedDocumentDetails-notes" />
            </list>
        </property>
    </bean>

    <bean id="OLEInvoiceView-PurchaseOrder-RequisitionView-Wrapper" parent="Uif-VerticalBoxGroup"
          p:render="@{#line.relatedViews.relatedRequisitionViews ne null and #line.relatedViews.relatedRequisitionViews.size()>0}">
    	<property name="items">
    		<list>
		      <bean parent="Uif-SectionHeader">
		      	<property name="inlineComponents">
		      		<list>
		      			<bean parent="Uif-ActionImage" p:render="@{showRequisition(#lineSuffix)}"
			      				p:refreshId="OLEInvoiceView-PurchaseOrder-RequisitionView-Wrapper@{#lineSuffix}" p:methodToCall="refresh">
		      				<property name="actionImage">
				      			<bean parent="Uif-Image" p:source="@{#ThemeImages}h2_expand.png"/>
		      				</property>
		      				<property name="additionalSubmitData">
		      					<map>
		      						<entry key="hideRequisitionFor" value="@{#lineSuffix}" />
		      					</map>
		      				</property>
		      			</bean>
		      			<bean parent="Uif-ActionLink" p:render="@{showRequisition(#lineSuffix)}" 
		      					p:actionLabel="Requisitions"
			      				p:refreshId="OLEInvoiceView-PurchaseOrder-RequisitionView-Wrapper@{#lineSuffix}" p:methodToCall="refresh">
		      				<property name="additionalSubmitData">
		      					<map>
		      						<entry key="hideRequisitionFor" value="@{#lineSuffix}" />
		      					</map>
		      				</property>
		      			</bean>
		      			<bean parent="Uif-ActionImage" p:render="@{!showRequisition(#lineSuffix)}"
			      				p:refreshId="OLEInvoiceView-PurchaseOrder-RequisitionView-Wrapper@{#lineSuffix}" p:methodToCall="refresh">
		      				<property name="actionImage">
				      			<bean parent="Uif-Image" p:source="@{#ThemeImages}h2_collapse.png"/>
		      				</property>
		      				<property name="additionalSubmitData">
		      					<map>
		      						<entry key="showRequisitionFor" value="@{#lineSuffix}" />
		      					</map>
		      				</property>
		      			</bean>
		      			<bean parent="Uif-ActionLink" p:render="@{!showRequisition(#lineSuffix)}" 
		      					p:actionLabel="Requisitions"
			      				p:refreshId="OLEInvoiceView-PurchaseOrder-RequisitionView-Wrapper@{#lineSuffix}" p:methodToCall="refresh">
		      				<property name="additionalSubmitData">
		      					<map>
		      						<entry key="showRequisitionFor" value="@{#lineSuffix}" />
		      					</map>
		      				</property>
		      			</bean>
		      		</list>
		      	</property>
		      	<property name="headerText" value="[0][2] [1][3]" />
		      </bean>
			    <bean parent="Uif-VerticalBoxGroup">
			    	<property name="items">
			    		<list>
			              <ref bean="OLEInvoiceView-PurchaseOrder-RequisitionView" />
			    		</list>
			    	</property>
			    </bean>
    		</list>
    	</property>
    </bean>
    
    <bean id="OLEInvoiceView-PurchaseOrder-RequisitionView" parent="Uif-TableSubCollection-WithinSection"  p:layoutManager.numberOfColumns="1"
          p:layoutManager.applyDefaultCellWidths="false" p:style="width:auto" p:filterModelProperty="filterRequisition"
          p:bindingInfo.bindByNamePrefix="purchaseOrderDocuments[@{#index}]">
        <property name="collectionObjectClass" value="org.kuali.ole.module.purap.businessobject.AbstractRelatedView" />
        <property name="propertyName" value="relatedViews.relatedRequisitionViews" />
        <property name="layoutManager.renderSequenceField" value="false" />
        <property name="layoutManager.richTable.templateOptions" value="false"/>
        <property name="layoutManager.richTable.render" value="false"/>
        <property name="renderAddLine" value="false"/>
        <property name="renderLineActions" value="false"/>
        <!--<property name="collectionLookup.render" value="true"/>-->
        <property name="items">
            <list>
                <bean id="po_requisitionView_notes" parent="Uif-LinkField" p:style="font-weight:bold;" p:link.href="@{#line.url}"  p:link.linkText="@{#line.documentIdentifierString}"  p:target="_blank"  p:label="@{#line.documentLabel}"/>
            </list>
        </property>
        <property name="subCollections">
            <list>
                <ref bean="OLEInvoice-ProcessTitle-relatedDocumentDetails-notes" />
            </list>
        </property>
    </bean>

    <bean id="OLEInvoiceView-PurchaseOrder-LineItemReceivingView-Wrapper" parent="Uif-VerticalBoxGroup"
          p:render="@{#line.relatedViews.relatedLineItemReceivingViews ne null and #line.relatedViews.relatedLineItemReceivingViews.size()>0}">
    	<property name="items">
    		<list>
		      <bean parent="Uif-SectionHeader">
		      	<property name="inlineComponents">
		      		<list>
		      			<bean parent="Uif-ActionImage" p:render="@{showLineItemReceiving(#lineSuffix)}"
			      				p:refreshId="OLEInvoiceView-PurchaseOrder-LineItemReceivingView-Wrapper@{#lineSuffix}" p:methodToCall="refresh">
		      				<property name="actionImage">
				      			<bean parent="Uif-Image" p:source="@{#ThemeImages}h2_expand.png"/>
		      				</property>
		      				<property name="additionalSubmitData">
		      					<map>
		      						<entry key="hideLineItemReceivingFor" value="@{#lineSuffix}" />
		      					</map>
		      				</property>
		      			</bean>
		      			<bean parent="Uif-ActionLink" p:render="@{showLineItemReceiving(#lineSuffix)}" 
		      					p:actionLabel="Line Item Receiving"
			      				p:refreshId="OLEInvoiceView-PurchaseOrder-LineItemReceivingView-Wrapper@{#lineSuffix}" p:methodToCall="refresh">
		      				<property name="additionalSubmitData">
		      					<map>
		      						<entry key="hideLineItemReceivingFor" value="@{#lineSuffix}" />
		      					</map>
		      				</property>
		      			</bean>
		      			<bean parent="Uif-ActionImage" p:render="@{!showLineItemReceiving(#lineSuffix)}"
			      				p:refreshId="OLEInvoiceView-PurchaseOrder-LineItemReceivingView-Wrapper@{#lineSuffix}" p:methodToCall="refresh">
		      				<property name="actionImage">
				      			<bean parent="Uif-Image" p:source="@{#ThemeImages}h2_collapse.png"/>
		      				</property>
		      				<property name="additionalSubmitData">
		      					<map>
		      						<entry key="showLineItemReceivingFor" value="@{#lineSuffix}" />
		      					</map>
		      				</property>
		      			</bean>
		      			<bean parent="Uif-ActionLink" p:render="@{!showLineItemReceiving(#lineSuffix)}" 
		      					p:actionLabel="Line Item Receiving"
			      				p:refreshId="OLEInvoiceView-PurchaseOrder-LineItemReceivingView-Wrapper@{#lineSuffix}" p:methodToCall="refresh">
		      				<property name="additionalSubmitData">
		      					<map>
		      						<entry key="showLineItemReceivingFor" value="@{#lineSuffix}" />
		      					</map>
		      				</property>
		      			</bean>
		      		</list>
		      	</property>
		      	<property name="headerText" value="[0][2] [1][3]" />
		      </bean>
			    <bean parent="Uif-VerticalBoxGroup">
			    	<property name="items">
			    		<list>
			              <ref bean="OLEInvoiceView-PurchaseOrder-LineItemReceivingView" />
			    		</list>
			    	</property>
			    </bean>
    		</list>
    	</property>
    </bean>
    
    <bean id="OLEInvoiceView-PurchaseOrder-LineItemReceivingView"  parent="Uif-TableSubCollection-WithinSection"  p:layoutManager.numberOfColumns="1"
          p:layoutManager.applyDefaultCellWidths="false" p:style="width:auto" p:filterModelProperty="filterLineItemReceiving"
          p:bindingInfo.bindByNamePrefix="purchaseOrderDocuments[@{#index}]">
        <property name="collectionObjectClass" value="org.kuali.ole.module.purap.businessobject.AbstractRelatedView" />
        <property name="headerText" value="Line Item Receiving" />
        <property name="propertyName" value="relatedViews.relatedLineItemReceivingViews" />
        <property name="layoutManager.renderSequenceField" value="false" />
        <property name="layoutManager.richTable.templateOptions" value="false"/>
        <property name="layoutManager.richTable.render" value="false"/>
        <property name="renderAddLine" value="false"/>
        <property name="renderLineActions" value="false"/>
        <!--<property name="collectionLookup.render" value="true"/>-->
        <property name="items">
            <list>
                <bean id="po_lineItemReceivingView_notes" parent="Uif-LinkField" p:style="font-weight:bold;" p:link.href="@{#line.url}"  p:link.linkText="@{#line.documentIdentifierString}"  p:target="_blank"  p:label="@{#line.documentLabel}"/>
            </list>
        </property>
        <property name="subCollections">
            <list>
                <ref bean="OLEInvoice-ProcessTitle-relatedDocumentDetails-notes" />
            </list>
        </property>
    </bean>

    <bean id="OLEInvoiceView-PurchaseOrder-CorrectionView-Wrapper" parent="Uif-VerticalBoxGroup"
          p:render="@{#line.relatedViews.relatedCorrectionReceivingViews ne null and #line.relatedViews.relatedCorrectionReceivingViews.size()>0}">
    	<property name="items">
    		<list>
		      <bean parent="Uif-SectionHeader">
		      	<property name="inlineComponents">
		      		<list>
		      			<bean parent="Uif-ActionImage" p:render="@{showCorrection(#lineSuffix)}"
			      				p:refreshId="OLEInvoiceView-PurchaseOrder-CorrectionView-Wrapper@{#lineSuffix}" p:methodToCall="refresh">
		      				<property name="actionImage">
				      			<bean parent="Uif-Image" p:source="@{#ThemeImages}h2_expand.png"/>
		      				</property>
		      				<property name="additionalSubmitData">
		      					<map>
		      						<entry key="hideCorrectionFor" value="@{#lineSuffix}" />
		      					</map>
		      				</property>
		      			</bean>
		      			<bean parent="Uif-ActionLink" p:render="@{showCorrection(#lineSuffix)}" 
		      					p:actionLabel="Correction Receiving"
			      				p:refreshId="OLEInvoiceView-PurchaseOrder-CorrectionView-Wrapper@{#lineSuffix}" p:methodToCall="refresh">
		      				<property name="additionalSubmitData">
		      					<map>
		      						<entry key="hideCorrectionFor" value="@{#lineSuffix}" />
		      					</map>
		      				</property>
		      			</bean>
		      			<bean parent="Uif-ActionImage" p:render="@{!showCorrection(#lineSuffix)}"
			      				p:refreshId="OLEInvoiceView-PurchaseOrder-CorrectionView-Wrapper@{#lineSuffix}" p:methodToCall="refresh">
		      				<property name="actionImage">
				      			<bean parent="Uif-Image" p:source="@{#ThemeImages}h2_collapse.png"/>
		      				</property>
		      				<property name="additionalSubmitData">
		      					<map>
		      						<entry key="showCorrectionFor" value="@{#lineSuffix}" />
		      					</map>
		      				</property>
		      			</bean>
		      			<bean parent="Uif-ActionLink" p:render="@{!showCorrection(#lineSuffix)}" 
		      					p:actionLabel="Correction Receiving"
			      				p:refreshId="OLEInvoiceView-PurchaseOrder-CorrectionView-Wrapper@{#lineSuffix}" p:methodToCall="refresh">
		      				<property name="additionalSubmitData">
		      					<map>
		      						<entry key="showCorrectionFor" value="@{#lineSuffix}" />
		      					</map>
		      				</property>
		      			</bean>
		      		</list>
		      	</property>
		      	<property name="headerText" value="[0][2] [1][3]" />
		      </bean>
			    <bean parent="Uif-VerticalBoxGroup">
			    	<property name="items">
			    		<list>
			              <ref bean="OLEInvoiceView-PurchaseOrder-CorrectionView" />
			    		</list>
			    	</property>
			    </bean>
    		</list>
    	</property>
    </bean>
    
    <bean id="OLEInvoiceView-PurchaseOrder-CorrectionView"  parent="Uif-TableSubCollection-WithinSection"  p:layoutManager.numberOfColumns="1"
          p:layoutManager.applyDefaultCellWidths="false" p:style="width:auto" p:filterModelProperty="filterCorrection"
          p:bindingInfo.bindByNamePrefix="purchaseOrderDocuments[@{#index}]">
        <property name="collectionObjectClass" value="org.kuali.ole.module.purap.businessobject.AbstractRelatedView" />
        <property name="propertyName" value="relatedViews.relatedCorrectionReceivingViews" />
        <property name="layoutManager.renderSequenceField" value="false" />
        <property name="layoutManager.richTable.templateOptions" value="false"/>
        <property name="layoutManager.richTable.render" value="false"/>
        <property name="renderAddLine" value="false"/>
        <property name="renderLineActions" value="false"/>
        <!--<property name="collectionLookup.render" value="true"/>-->
        <property name="items">
            <list>
                <bean id="po_correctionView_notes" parent="Uif-LinkField" p:style="font-weight:bold;" p:link.href="@{#line.url}"  p:link.linkText="@{#line.documentIdentifierString}"  p:target="_blank"  p:label="@{#line.documentLabel}"/>
            </list>
        </property>
        <property name="subCollections">
            <list>
                <ref bean="OLEInvoice-ProcessTitle-relatedDocumentDetails-notes" />
            </list>
        </property>
    </bean>

    <bean id="OLEInvoiceView-PurchaseOrder-PaymentRequestView-Wrapper" parent="Uif-VerticalBoxGroup"
          p:render="@{#line.relatedViews.relatedPaymentRequestViews ne null and #line.relatedViews.relatedPaymentRequestViews.size()>0}">
    	<property name="items">
    		<list>
		      <bean parent="Uif-SectionHeader">
		      	<property name="inlineComponents">
		      		<list>
		      			<bean parent="Uif-ActionImage" p:render="@{showPaymentRequest(#lineSuffix)}"
			      				p:refreshId="OLEInvoiceView-PurchaseOrder-PaymentRequestView-Wrapper@{#lineSuffix}" p:methodToCall="refresh">
		      				<property name="actionImage">
				      			<bean parent="Uif-Image" p:source="@{#ThemeImages}h2_expand.png"/>
		      				</property>
		      				<property name="additionalSubmitData">
		      					<map>
		      						<entry key="hidePaymentRequestFor" value="@{#lineSuffix}" />
		      					</map>
		      				</property>
		      			</bean>
		      			<bean parent="Uif-ActionLink" p:render="@{showPaymentRequest(#lineSuffix)}" 
		      					p:actionLabel="Payment Request"
			      				p:refreshId="OLEInvoiceView-PurchaseOrder-PaymentRequestView-Wrapper@{#lineSuffix}" p:methodToCall="refresh">
		      				<property name="additionalSubmitData">
		      					<map>
		      						<entry key="hidePaymentRequestFor" value="@{#lineSuffix}" />
		      					</map>
		      				</property>
		      			</bean>
		      			<bean parent="Uif-ActionImage" p:render="@{!showPaymentRequest(#lineSuffix)}"
			      				p:refreshId="OLEInvoiceView-PurchaseOrder-PaymentRequestView-Wrapper@{#lineSuffix}" p:methodToCall="refresh">
		      				<property name="actionImage">
				      			<bean parent="Uif-Image" p:source="@{#ThemeImages}h2_collapse.png"/>
		      				</property>
		      				<property name="additionalSubmitData">
		      					<map>
		      						<entry key="showPaymentRequestFor" value="@{#lineSuffix}" />
		      					</map>
		      				</property>
		      			</bean>
		      			<bean parent="Uif-ActionLink" p:render="@{!showPaymentRequest(#lineSuffix)}" 
		      					p:actionLabel="Payment Request"
			      				p:refreshId="OLEInvoiceView-PurchaseOrder-PaymentRequestView-Wrapper@{#lineSuffix}" p:methodToCall="refresh">
		      				<property name="additionalSubmitData">
		      					<map>
		      						<entry key="showPaymentRequestFor" value="@{#lineSuffix}" />
		      					</map>
		      				</property>
		      			</bean>
		      		</list>
		      	</property>
		      	<property name="headerText" value="[0][2] [1][3]" />
		      </bean>
			    <bean parent="Uif-VerticalBoxGroup">
			    	<property name="items">
			    		<list>
			              <ref bean="OLEInvoiceView-PurchaseOrder-PaymentRequestView" />
			    		</list>
			    	</property>
			    </bean>
    		</list>
    	</property>
    </bean>
    
    <bean id="OLEInvoiceView-PurchaseOrder-PaymentRequestView"  parent="Uif-TableSubCollection-WithinSection"  p:layoutManager.numberOfColumns="1"
          p:layoutManager.applyDefaultCellWidths="false" p:style="width:auto" p:filterModelProperty="filterPaymentRequest"
          p:bindingInfo.bindByNamePrefix="purchaseOrderDocuments[@{#index}]">
        <property name="collectionObjectClass" value="org.kuali.ole.module.purap.businessobject.AbstractRelatedView" />
        <property name="propertyName" value="relatedViews.relatedPaymentRequestViews" />
        <property name="layoutManager.renderSequenceField" value="false" />
        <property name="layoutManager.richTable.templateOptions" value="false"/>
        <property name="layoutManager.richTable.render" value="false"/>
        <property name="renderAddLine" value="false"/>
        <property name="renderLineActions" value="false"/>
        <!--<property name="collectionLookup.render" value="true"/>-->
        <property name="items">
            <list>
                <bean id="po_paymentRequestView_notes" parent="Uif-LinkField" p:style="font-weight:bold;" p:link.href="@{#line.url}"  p:link.linkText="@{#line.documentIdentifierString}"  p:target="_blank"  p:label="@{#line.documentLabel}"/>
            </list>
        </property>
        <property name="subCollections">
            <list>
                <ref bean="OLEInvoice-ProcessTitle-relatedDocumentDetails-notes" />
            </list>
        </property>
    </bean>

    <bean id="OLEInvoiceView-PurchaseOrder-CreditMemoView-Wrapper" parent="Uif-VerticalBoxGroup"
          p:render="@{#line.relatedViews.relatedCreditMemoViews ne null and #line.relatedViews.relatedCreditMemoViews.size()>0}">
    	<property name="items">
    		<list>
		      <bean parent="Uif-SectionHeader">
		      	<property name="inlineComponents">
		      		<list>
		      			<bean parent="Uif-ActionImage" p:render="@{showCreditMemo(#lineSuffix)}"
			      				p:refreshId="OLEInvoiceView-PurchaseOrder-CreditMemoView-Wrapper@{#lineSuffix}" p:methodToCall="refresh">
		      				<property name="actionImage">
				      			<bean parent="Uif-Image" p:source="@{#ThemeImages}h2_expand.png"/>
		      				</property>
		      				<property name="additionalSubmitData">
		      					<map>
		      						<entry key="hideCreditMemoFor" value="@{#lineSuffix}" />
		      					</map>
		      				</property>
		      			</bean>
		      			<bean parent="Uif-ActionLink" p:render="@{showCreditMemo(#lineSuffix)}" 
		      					p:actionLabel="Credit Memo"
			      				p:refreshId="OLEInvoiceView-PurchaseOrder-CreditMemoView-Wrapper@{#lineSuffix}" p:methodToCall="refresh">
		      				<property name="additionalSubmitData">
		      					<map>
		      						<entry key="hideCreditMemoFor" value="@{#lineSuffix}" />
		      					</map>
		      				</property>
		      			</bean>
		      			<bean parent="Uif-ActionImage" p:render="@{!showCreditMemo(#lineSuffix)}"
			      				p:refreshId="OLEInvoiceView-PurchaseOrder-CreditMemoView-Wrapper@{#lineSuffix}" p:methodToCall="refresh">
		      				<property name="actionImage">
				      			<bean parent="Uif-Image" p:source="@{#ThemeImages}h2_collapse.png"/>
		      				</property>
		      				<property name="additionalSubmitData">
		      					<map>
		      						<entry key="showCreditMemoFor" value="@{#lineSuffix}" />
		      					</map>
		      				</property>
		      			</bean>
		      			<bean parent="Uif-ActionLink" p:render="@{!showCreditMemo(#lineSuffix)}" 
		      					p:actionLabel="Credit Memo"
			      				p:refreshId="OLEInvoiceView-PurchaseOrder-CreditMemoView-Wrapper@{#lineSuffix}" p:methodToCall="refresh">
		      				<property name="additionalSubmitData">
		      					<map>
		      						<entry key="showCreditMemoFor" value="@{#lineSuffix}" />
		      					</map>
		      				</property>
		      			</bean>
		      		</list>
		      	</property>
		      	<property name="headerText" value="[0][2] [1][3]" />
		      </bean>
			    <bean parent="Uif-VerticalBoxGroup">
			    	<property name="items">
			    		<list>
			              <ref bean="OLEInvoiceView-PurchaseOrder-CreditMemoView" />
			    		</list>
			    	</property>
			    </bean>
    		</list>
    	</property>
    </bean>
    
    <bean id="OLEInvoiceView-PurchaseOrder-CreditMemoView"  parent="Uif-TableSubCollection-WithinSection"  p:layoutManager.numberOfColumns="1"
          p:layoutManager.applyDefaultCellWidths="false" p:style="width:auto" p:filterModelProperty="filterCreditMemo"
          p:bindingInfo.bindByNamePrefix="purchaseOrderDocuments[@{#index}]">
        <property name="collectionObjectClass" value="org.kuali.ole.module.purap.businessobject.AbstractRelatedView" />
        <property name="propertyName" value="relatedViews.relatedCreditMemoViews" />
        <property name="layoutManager.renderSequenceField" value="false" />
        <property name="layoutManager.richTable.templateOptions" value="false"/>
        <property name="layoutManager.richTable.render" value="false"/>
        <property name="renderAddLine" value="false"/>
        <property name="renderLineActions" value="false"/>
        <!--<property name="collectionLookup.render" value="true"/>-->
        <property name="items">
            <list>
                <bean id="po_creditMemoView_notes" parent="Uif-LinkField" p:style="font-weight:bold;" p:link.href="@{#line.url}"  p:link.linkText="@{#line.documentIdentifierString}"  p:target="_blank"  p:label="@{#line.documentLabel}"/>
            </list>
        </property>
        <property name="subCollections">
            <list>
                <ref bean="OLEInvoice-ProcessTitle-relatedDocumentDetails-notes" />
            </list>
        </property>
    </bean>

    <bean id="OLEInvoiceView-Item-accountingLines" parent="OLEInvoiceView-accountingLines-parent">
        <property name="collectionObjectClass" value="org.kuali.ole.module.purap.businessobject.InvoiceAccount" />
        <property name="addLineActions">
            <list>
                <bean id="item_AccountingLine" parent="Uif-PrimaryActionButton-Small" p:methodToCall="addSourceAccountingLine" p:actionLabel="Add" p:title="Add Source Accounting Line" p:ajaxSubmit="true" />
            </list>
        </property>
    </bean>

</beans>

